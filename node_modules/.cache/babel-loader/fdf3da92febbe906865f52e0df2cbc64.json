{"ast":null,"code":"import _slicedToArray from \"C:/Users/123/Documents/Easynet/argon-dashboard/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _objectSpread from \"C:/Users/123/Documents/Easynet/argon-dashboard/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport { ResponseBody } from \"../models/types\";\nimport { responseCodes } from \"../utils/static\";\nimport { isNullOrUndefined, isObject } from \"../utils/tools\";\nimport { responseMessage } from \"../utils/ui-messages\";\nexport var handleMyErrors = function handleMyErrors(err) {\n  var finalErrRes = {\n    responseCode: \"\",\n    data: {},\n    hasError: true\n  };\n\n  try {\n    var _err$response, _errRes$error_descrip, _errRes$error, _errRes$error2, _err$message, _err$message2;\n\n    var errRes = (_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.data;\n\n    if (!isNullOrUndefined(errRes) && (_errRes$error_descrip = errRes.error_description) !== null && _errRes$error_descrip !== void 0 && _errRes$error_descrip.toString().includes(\"change default/initial\")) {\n      finalErrRes = _objectSpread(_objectSpread({}, finalErrRes), {}, {\n        responseCode: responseCodes.CHANGE_PASSWORD\n      });\n    } else if (!isNullOrUndefined(errRes) && (_errRes$error = errRes.error) !== null && _errRes$error !== void 0 && _errRes$error.toString().includes(\"access_denied\")) {\n      finalErrRes = _objectSpread(_objectSpread({}, finalErrRes), {}, {\n        responseCode: responseCodes.ACCESS_DENIED,\n        data: responseMessage.ACCESS_DENIED\n      });\n      throw new Error(String(finalErrRes));\n    } else if (!isNullOrUndefined(errRes) && (_errRes$error2 = errRes.error) !== null && _errRes$error2 !== void 0 && _errRes$error2.toString().includes(\"invalid_grant\")) {\n      finalErrRes = _objectSpread(_objectSpread({}, finalErrRes), {}, {\n        responseCode: responseCodes.INVALID_GRANT,\n        data: responseMessage.INVALID_GRANT\n      });\n      throw new Error(String(finalErrRes));\n    } else if ((_err$message = err.message) !== null && _err$message !== void 0 && _err$message.includes(\"401\")) {\n      finalErrRes = _objectSpread(_objectSpread({}, finalErrRes), {}, {\n        data: responseMessage.SESSION_EXPIRED,\n        responseCode: responseCodes.UNAUTHORIZED\n      }); // throw new Error(responseMessage.REQUEST_COULD_NOT_BEEN_AUTHENTICATED);\n    } else if ((_err$message2 = err.message) !== null && _err$message2 !== void 0 && _err$message2.includes(\"404\")) {\n      finalErrRes = _objectSpread(_objectSpread({}, finalErrRes), {}, {\n        responseCode: responseCodes.PAGE_NOT_FOUND,\n        data: \"No response from requested service as it is not found\"\n      });\n    } else if (!isNullOrUndefined(err === null || err === void 0 ? void 0 : err.response) && isObject(err === null || err === void 0 ? void 0 : err.response)) {\n      var _errResDataString;\n\n      var errResData = err.response.data || {};\n      var errResDataString = \"\";\n\n      for (var _i = 0, _Object$entries = Object.entries(errResData); _i < _Object$entries.length; _i++) {\n        var _Object$entries$_i = _slicedToArray(_Object$entries[_i], 2),\n            keys = _Object$entries$_i[0],\n            values = _Object$entries$_i[1];\n\n        errResDataString += keys !== \"responseCode\" ? values + \"<br/>\" : \"\";\n      }\n\n      if (errResDataString.includes(\"service unavailable\")) {\n        finalErrRes = _objectSpread(_objectSpread({}, finalErrRes), {}, {\n          responseCode: responseCodes.SERVICE_UNAVAILABLE,\n          data: responseMessage.SERVICE_UNAVAILABLE\n        });\n      } else finalErrRes = _objectSpread(_objectSpread({}, finalErrRes), {}, {\n        responseCode: responseCodes.BAD_REQUEST,\n        data: isNullOrUndefined(errResDataString) || (_errResDataString = errResDataString) !== null && _errResDataString !== void 0 && _errResDataString.toLowerCase().includes(\"bad request\") ? responseMessage.BAD_REQUEST : errResDataString\n      });\n    } else {\n      finalErrRes = _objectSpread(_objectSpread({}, finalErrRes), {}, {\n        responseCode: responseCodes.ERROR_OCCURRED,\n        data: err.message\n      });\n    }\n  } catch (err) {\n    finalErrRes = _objectSpread(_objectSpread({}, finalErrRes), {}, {\n      responseCode: responseCodes.ERROR_OCCURRED\n    });\n    console.log(\"ERROR OCCURRED WHILE PARSING ERRORS=>\", err);\n  }\n\n  return finalErrRes;\n};","map":{"version":3,"names":["ResponseBody","responseCodes","isNullOrUndefined","isObject","responseMessage","handleMyErrors","err","finalErrRes","responseCode","data","hasError","errRes","response","error_description","toString","includes","CHANGE_PASSWORD","error","ACCESS_DENIED","Error","String","INVALID_GRANT","message","SESSION_EXPIRED","UNAUTHORIZED","PAGE_NOT_FOUND","errResData","errResDataString","Object","entries","keys","values","SERVICE_UNAVAILABLE","BAD_REQUEST","toLowerCase","ERROR_OCCURRED","console","log"],"sources":["C:/Users/123/Documents/Easynet/argon-dashboard/src/services/error-handler-service.js"],"sourcesContent":["import { ResponseBody } from \"../models/types\";\r\nimport { responseCodes } from \"../utils/static\";\r\nimport { isNullOrUndefined, isObject } from \"../utils/tools\";\r\nimport { responseMessage } from \"../utils/ui-messages\";\r\n\r\nexport const handleMyErrors = (err: any) => {\r\n  let finalErrRes: ResponseBody = {\r\n    responseCode: \"\",\r\n    data: {},\r\n    hasError: true,\r\n  };\r\n  try {\r\n    const errRes = err.response?.data;\r\n    if (\r\n      !isNullOrUndefined(errRes) &&\r\n      errRes.error_description?.toString().includes(\"change default/initial\")\r\n    ) {\r\n      finalErrRes = {\r\n        ...finalErrRes,\r\n        responseCode: responseCodes.CHANGE_PASSWORD,\r\n      };\r\n    } else if (\r\n      !isNullOrUndefined(errRes) &&\r\n      errRes.error?.toString().includes(\"access_denied\")\r\n    ) {\r\n      finalErrRes = {\r\n        ...finalErrRes,\r\n        responseCode: responseCodes.ACCESS_DENIED,\r\n        data: responseMessage.ACCESS_DENIED,\r\n      };\r\n      throw new Error(String(finalErrRes));\r\n    } else if (\r\n      !isNullOrUndefined(errRes) &&\r\n      errRes.error?.toString().includes(\"invalid_grant\")\r\n    ) {\r\n      finalErrRes = {\r\n        ...finalErrRes,\r\n        responseCode: responseCodes.INVALID_GRANT,\r\n        data: responseMessage.INVALID_GRANT,\r\n      };\r\n      throw new Error(String(finalErrRes));\r\n    } else if (err.message?.includes(\"401\")) {\r\n      finalErrRes = {\r\n        ...finalErrRes,\r\n        data: responseMessage.SESSION_EXPIRED,\r\n        responseCode: responseCodes.UNAUTHORIZED,\r\n      };\r\n      // throw new Error(responseMessage.REQUEST_COULD_NOT_BEEN_AUTHENTICATED);\r\n    } else if (err.message?.includes(\"404\")) {\r\n      finalErrRes = {\r\n        ...finalErrRes,\r\n        responseCode: responseCodes.PAGE_NOT_FOUND,\r\n        data: \"No response from requested service as it is not found\",\r\n      };\r\n    } else if (!isNullOrUndefined(err?.response) && isObject(err?.response)) {\r\n      let errResData = err.response.data || {};\r\n      let errResDataString = \"\";\r\n      for (const [keys, values] of Object.entries(errResData)) {\r\n        errResDataString += keys !== \"responseCode\" ? values + \"<br/>\" : \"\";\r\n      }\r\n      if (errResDataString.includes(\"service unavailable\")) {\r\n        finalErrRes = {\r\n          ...finalErrRes,\r\n          responseCode: responseCodes.SERVICE_UNAVAILABLE,\r\n          data: responseMessage.SERVICE_UNAVAILABLE,\r\n        };\r\n      } else\r\n        finalErrRes = {\r\n          ...finalErrRes,\r\n          responseCode: responseCodes.BAD_REQUEST,\r\n          data:\r\n            isNullOrUndefined(errResDataString) ||\r\n            errResDataString?.toLowerCase().includes(\"bad request\")\r\n              ? responseMessage.BAD_REQUEST\r\n              : errResDataString,\r\n        };\r\n    } else {\r\n      finalErrRes = {\r\n        ...finalErrRes,\r\n        responseCode: responseCodes.ERROR_OCCURRED,\r\n        data: err.message,\r\n      };\r\n    }\r\n  } catch (err) {\r\n    finalErrRes = {\r\n      ...finalErrRes,\r\n      responseCode: responseCodes.ERROR_OCCURRED,\r\n    };\r\n    console.log(\"ERROR OCCURRED WHILE PARSING ERRORS=>\", err);\r\n  }\r\n  return finalErrRes;\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}